{"version":3,"file":"src_app_student_stu-content_stu-content-audio_stu-content-audio_module_ts.js","mappings":"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","sources":["./src/app/student/stu-content/stu-content-audio/stu-content-audio-routing.module.ts","./src/app/student/stu-content/stu-content-audio/stu-content-audio.module.ts","./src/app/student/stu-content/stu-content-audio/stu-content-audio.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { StuContentAudioPage } from './stu-content-audio.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: StuContentAudioPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class StuContentAudioPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { StuContentAudioPageRoutingModule } from './stu-content-audio-routing.module';\r\n\r\nimport { StuContentAudioPage } from './stu-content-audio.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    StuContentAudioPageRoutingModule\r\n  ],\r\n  declarations: [StuContentAudioPage]\r\n})\r\nexport class StuContentAudioPageModule {}\r\n","/* eslint-disable @typescript-eslint/naming-convention */\r\nimport * as YTPlayer from 'yt-player';\r\nimport { Router } from '@angular/router';\r\nimport { Libro } from 'src/app/models/libro';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Progreso } from 'src/app/models/progreso';\r\nimport { EstudianteDetail } from 'src/app/models/estudiante';\r\nimport { LibroService } from 'src/app/services/libro.service';\r\nimport { ProgresoService } from 'src/app/services/progreso.service';\r\nimport { CuestionarioService } from 'src/app/services/cuestionario.service';\r\n@Component({\r\n  selector: 'app-stu-content-audio',\r\n  templateUrl: './stu-content-audio.page.html',\r\n  styleUrls: ['./stu-content-audio.page.scss'],\r\n})\r\nexport class StuContentAudioPage implements OnInit {\r\n  /* eslint-disable @typescript-eslint/naming-convention */\r\n  libro: Libro = {\r\n    id: 0,\r\n    Titulo: '',\r\n    Audio: '',\r\n    Video: '',\r\n    Imagen: '',\r\n    Autor: ''\r\n  };\r\n  progreso: Progreso = {\r\n    id: 0,\r\n    Progreso: 0,\r\n    Reaccion: '',\r\n    Comentario: '',\r\n    FinalAlternativo: '',\r\n    FechaLectura: new Date(),\r\n    NotaCuestionario: 0,\r\n    NumeroIntento: 0,\r\n    LibroId: 0,\r\n    EstudianteId: 0\r\n  };\r\n  progresocreate: Progreso = {\r\n    id: 0,\r\n    Progreso: 0,\r\n    Reaccion: '',\r\n    Comentario: '',\r\n    FinalAlternativo: '',\r\n    FechaLectura: new Date(),\r\n    NotaCuestionario: 0,\r\n    NumeroIntento: 0,\r\n    LibroId: 0,\r\n    EstudianteId: 0\r\n  };\r\n  estudiante: EstudianteDetail = {\r\n    id: 0,\r\n    Nombre: '',\r\n    Apellido: '',\r\n    Genero: '',\r\n    Documento: '',\r\n    GradoId: 0,\r\n    grado: {\r\n      id: 0,\r\n      Nombre: '',\r\n    },\r\n  };\r\n  elurl;\r\n  existencia = 'no existe';\r\n  mensaje;\r\n  estado = '';\r\n  haycuestionario = true;\r\n  resolviocuestionario = false;\r\n  cuestionarios: any = [];\r\n  constructor(\r\n    private router: Router,\r\n    private libroService: LibroService,\r\n    private progresoService: ProgresoService,\r\n    private cuestionarioService: CuestionarioService,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n  const player = new YTPlayer('#player', {\r\n    height: '250',\r\n    width: '310', controls: false} );\r\n  player.setVolume(100);\r\n  player.on('timeupdate', (seconds) => {\r\n  const procc = seconds/player.getDuration();\r\n    if (procc >= 0.95) {\r\n    console.log('Video completado');\r\n    // if (this.progreso.Progreso === 0) {\r\n    //   this.progreso.Progreso = 50;\r\n    // }\r\n  }\r\n  });\r\n  const parametro = JSON.parse(localStorage.getItem('ellibro'));\r\n  const parestudiante = JSON.parse(localStorage.getItem('usuario'));\r\n  console.log(parametro);\r\n  this.libroService.getLibro(parametro).subscribe(\r\n    reslibro => {\r\n      this.libro = reslibro;\r\n      console.log(this.libro);\r\n      const par = this.libro.Audio;\r\n      player.load(par); //URL\r\n      this.cuestionarioService.getsearchCuestionariobylibro(parametro).subscribe(\r\n        rescuestionarios => {\r\n          if (Object.entries(rescuestionarios).length > 0) {\r\n            this.cuestionarios = rescuestionarios;\r\n            this.haycuestionario = true;\r\n          } else {\r\n            console.log('No hay Cuestionarios');\r\n          }\r\n        });\r\n        this.progresoService.getProgresoidividual(parametro, parestudiante.id).subscribe(\r\n          resprogreso => {\r\n            if (resprogreso !== null) {\r\n              this.progreso = resprogreso;\r\n              console.log(this.progreso);\r\n            } else {\r\n              this.progresocreate.LibroId = parametro;\r\n              this.progresocreate.EstudianteId = parestudiante.id;\r\n              this.progresocreate.Progreso = 0;\r\n              this.progresoService.saveProgreso(this.progresocreate).subscribe(\r\n                resnewprogreso => {\r\n                  this.progreso = resnewprogreso;\r\n                  this.estado = 'iniciado';\r\n                  window.location.reload();\r\n                }, err => {\r\n                  console.log('Error create progreso');\r\n                }\r\n              );\r\n            }\r\n          }, err => {\r\n            console.log('Error get proceso by libro y alumno');\r\n          }\r\n        );\r\n      }, err => {\r\n        console.log('Error get libro by id');\r\n      }\r\n    );\r\n  }\r\n  elegir(dato) {\r\n    this.progreso.Reaccion = dato;\r\n    if (this.progreso.Progreso === 0) {\r\n      this.progreso.Progreso = 50;\r\n    }\r\n  }\r\n  deselegir() {\r\n    this.progreso.Reaccion = '';\r\n    if (this.progreso.Progreso === 50) {\r\n      this.progreso.Progreso = 0;\r\n    }\r\n  }\r\n  validarprogreso() {\r\n    if (this.progreso.Progreso < 100) {\r\n      if (this.progreso.Progreso === 50) {\r\n        if (this.progreso.Comentario.length > 10) {\r\n          this.progreso.Progreso = this.progreso.Progreso + 20;\r\n        }\r\n        if (this.progreso.FinalAlternativo.length > 20) {\r\n          this.progreso.Progreso = this.progreso.Progreso + 30;\r\n        }\r\n      }\r\n      if (this.progreso.Progreso === 70) {\r\n        if (this.progreso.FinalAlternativo.length > 20) {\r\n          this.progreso.Progreso = this.progreso.Progreso + 30;\r\n        }\r\n      }\r\n      if (this.progreso.Progreso === 80) {\r\n        if (this.progreso.Comentario.length > 10) {\r\n          this.progreso.Progreso = this.progreso.Progreso + 20;\r\n        }\r\n      }\r\n    } else {\r\n      this.progreso.Progreso = 100;\r\n    }\r\n  }\r\n  actualizar(dato) {\r\n    this.validarprogreso();\r\n    this.progresoService.updateProgreso(dato, this.progreso).subscribe(\r\n      resupdate => {\r\n        this.mensaje = resupdate;\r\n      }, err => {\r\n        console.log('Error Update Progreso');\r\n      }\r\n    );\r\n  }\r\n  async iracuestionario(dato) {\r\n    this.actualizar(dato);\r\n    await this.delay(1000);\r\n    this.router.navigate(\r\n      [\r\n        'student',\r\n        'stu-content',\r\n        'stu-content-evaluation'\r\n      ]\r\n    );\r\n  }\r\n  delay(ms: number) {\r\n    return new Promise( resolve => setTimeout(resolve, ms) );\r\n  }\r\n  async terminar(dato) {\r\n    this.actualizar(dato);\r\n    await this.delay(1000);\r\n    this.router.navigate(\r\n      [\r\n        'student',\r\n        'stu-content'\r\n      ]\r\n    );\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}